var ec=function(n){function u(){n(".menu:not(.left):not(.right)").each(function(){n(this).css("left",n(window).width()/2-n(this).outerWidth(!0)/2)})}function i(t){var e=n("[data-sub-menu-id='"+t+"']"),u=e.closest(".sub-menu"),f=[],r;return u.length>0&&(r=u.attr("id"),i(r),f.push(r)),f}function f(t){var u=n("#"+t),s,f,e,h,o;if(!u.hasClass("visible")){for(s=i(t),f=u.closest(".menu").outerHeight()+r,e=0;e<s.length;e++)f+=n("#"+s[e]).outerHeight()+r;u.closest(".menu").hasClass("bottom")?u.css("bottom",f):u.css("top",f);u.hasClass("list")&&(h=n("[data-sub-menu-id='"+t+"']"),o=Math.round(h.position().left+h.width()/2-u.width()/2),o<-1&&(o=-1),u.css("left",o));u.addClass("visible")}}var t={},r=8;return t.toggleSubMenu=function(i){var r=n("#"+i);r.hasClass("visible")?t.closeSubMenu(i):t.openSubMenu(i)},t.openSubMenu=function(t){var e=n("#"+t),r,u;if(e.length!==0){for(r=i(t),e.closest(".menu").find(".sub-menu").filter(function(){return n(this).attr("id")!==t&&n.inArray(n(this).attr("id"),r)}).removeClass("visible"),u=0;u<r.length;u++)f(r[u]);f(t)}},t.closeSubMenu=function(r,u){var f,o,e,s;if((u=typeof u=="undefined"?!1:!0,f=n("#"+r),f.hasClass("visible"))&&(f.children("[data-sub-menu-id]").each(function(){t.closeSubMenu(n(this).data("sub-menu-id"))}),f.removeClass("visible"),u))for(o=i(r),e=0;e<o.length;e++)s=n("#"+o[e]),s.removeClass("visible")},n(function(){u();n(".menu").addClass("visible");n(window).resize(u);n("[data-sub-menu-id]").on("click",function(){t.toggleSubMenu(n(this).data("sub-menu-id"))});n(".menu").on("click",".sub-menu button:not([data-sub-menu-id]), .sub-menu.list li:not([data-sub-menu-id])",function(){n(this).closest(".menu").find(".sub-menu").removeClass("visible")})}),t}(jQuery);