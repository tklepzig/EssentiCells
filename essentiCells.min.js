var ec=function(e){function s(){e(".menu:not(.left):not(.right)").each(function(){e(this).css("left",e(window).width()/2-e(this).outerWidth(!0)/2)})}function n(s){var t=e("[data-sub-menu-id='"+s+"']"),i=t.closest(".sub-menu"),u=[];if(i.length>0){var a=i.attr("id");n(a),u.push(a)}return u}function t(s){var t=e("#"+s);if(!t.hasClass("visible")){for(var i=n(s),a=t.closest(".menu").outerHeight()+u,o=0;o<i.length;o++)a+=e("#"+i[o]).outerHeight()+u;if(t.closest(".menu").hasClass("bottom")?t.css("bottom",a):t.css("top",a),t.hasClass("list")){var l=e("[data-sub-menu-id='"+s+"']"),r=Math.round(l.position().left+l.width()/2-t.width()/2);-1>r&&(r=-1),t.css("left",r)}t.addClass("visible")}}var i={},u=8;return i.toggleSubMenu=function(s){var n=e("#"+s);n.hasClass("visible")?i.closeSubMenu(s):i.openSubMenu(s)},i.openSubMenu=function(s){var i=e("#"+s);if(0!==i.length){var u=n(s);i.closest(".menu").find(".sub-menu").filter(function(){return e(this).attr("id")!==s&&e.inArray(e(this).attr("id"),u)}).removeClass("visible");for(var a=0;a<u.length;a++)t(u[a]);t(s)}},i.closeSubMenu=function(s,t){t="undefined"==typeof t?!1:!0;var u=e("#"+s);if(u.hasClass("visible")&&(u.children("[data-sub-menu-id]").each(function(){i.closeSubMenu(e(this).data("sub-menu-id"))}),u.removeClass("visible"),t))for(var a=n(s),o=0;o<a.length;o++){var l=e("#"+a[o]);l.removeClass("visible")}},e(function(){s(),e(".menu").addClass("visible"),e(window).resize(s),e(".menu").on("click","[data-sub-menu-id]",function(){i.toggleSubMenu(e(this).data("sub-menu-id"))}),e(".menu").on("click",".sub-menu button:not([data-sub-menu-id]), .sub-menu.list li:not([data-sub-menu-id])",function(){e(this).closest(".menu").find(".sub-menu").removeClass("visible")})}),i}(jQuery);